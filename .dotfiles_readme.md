# Dotfile Management

Dotfiles for personal and work development managed loosely according to the method described in [this article](https://www.atlassian.com/git/tutorials/dotfiles).

Alias `config` allows committing/updating the dotfiles repository from any location in the terminal.

## Setting Up a New Workstation

### Installing Software

Currently I'm using the following software for a basic dev environment. Trivial/wide baseline dependencies like `git` and `python3` are not included here.

- Neovim (Usually through a [binary distribution](https://neovim.io/doc/install/#install-from-download) unpacked into `~/.local`)
  - Prerequisites (mostly installed through binary distribution in `~/.local/bin`):
    - [`fzf`](https://github.com/junegunn/fzf)
    - [`lazygit`](https://github.com/jesseduffield/lazygit)
    - [`ripgrep`](https://github.com/BurntSushi/ripgrep)
    - [`fd`](https://github.com/sharkdp/fd)
    - node (through [nvm](https://github.com/nvm-sh/nvm?tab=readme-ov-file#installing-and-updating))
- [Oh My Zsh](https://ohmyz.sh/)

### Importing Dotfiles

(copied from Atlassian tutorial)

Clone into a bare repository in a "dot" folder of your $HOME:

```sh
git clone --bare <git-repo-url> $HOME/.cfg
```

Define the alias in the current shell scope:

```sh
alias config='/usr/bin/git --git-dir=$HOME/.cfg/ --work-tree=$HOME'
```

Checkout the actual content from the bare repository to your `$HOME`:

```sh
config checkout
```

The step above might fail with a message like:

```
error: The following untracked working tree files would be overwritten by checkout:
    .bashrc
    .gitignore
Please move or remove them before you can switch branches.
Aborting
```

This is because your `$HOME` folder might already have some stock configuration files which would be overwritten by Git. The solution is simple: back up the files if you care about them, remove them if you don't care. I provide you with a possible rough shortcut to move all the offending files automatically to a backup folder:

```sh
mkdir -p .config-backup && \
config checkout 2>&1 | egrep "\s+\." | awk {'print $1'} | \
xargs -I{} mv {} .config-backup/{}
```

Re-run the check out if you had problems:

```sh
config checkout
```

Set the flag `showUntrackedFiles` to `no` on this specific (local) repository:

```sh
config config --local status.showUntrackedFiles no
```

You're done, from now on you can now type `config` commands to add and update your dotfiles:

```sh
config status
config add .vimrc
config commit -m "Add vimrc"
config add .bashrc
config commit -m "Add bashrc"
config push
```
